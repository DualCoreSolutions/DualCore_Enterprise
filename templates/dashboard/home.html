{% extends 'base.html' %}

{% block content %}
<div class="dashboard-container">
    <header style="margin-bottom: 40px;">
        <h1 style="font-size: 2.5rem; margin-bottom: 10px;">Dashboard</h1>
        <p class="text-muted">Bem-vindo, <span class="text-primary">{{ user.username }}</span>. Gerencie seus serviços abaixo.</p>
    </header>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
        
        <div class="card">
            <h3 style="margin-top: 0; color: var(--secondary);">Informações de Conta</h3>
            <div style="margin: 20px 0;">
                <p><strong>E-mail:</strong> {{ user.email }}</p>
                <p><strong>Telefone:</strong> {{ user.telefone|default:"Não informado" }}</p>
                <p><strong>Status:</strong> 
                    <span style="color: var(--primary); font-size: 0.8rem; border: 1px solid var(--primary); padding: 2px 8px; border-radius: 4px;">
                        {% if user.is_client %} CLIENTE VIP {% else %} MEMBRO {% endif %}
                    </span>
                </p>
            </div>
            <a href="{% url 'editar_perfil' %}" class="btn btn-outline" style="width: 100%; text-align: center;">Editar Perfil</a>
        </div>

        {% if user.is_staff %}
        <div class="card" style="border-color: var(--primary);">
            <h3 style="margin-top: 0; color: var(--primary);">Pedidos Recentes</h3>
            {% if orcamentos %}
                <ul style="list-style: none; padding: 0; margin-top: 15px;">
                {% for o in orcamentos %}
                    <li style="padding: 10px 0; border-bottom: 1px solid var(--border);">
                        <strong>{{ o.nome }}</strong> - <span class="text-muted">{{ o.get_servico_display }}</span>
                    </li>
                {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">Nenhuma solicitação pendente.</p>
            {% endif %}
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}